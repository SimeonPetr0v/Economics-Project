<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ß–∞—Ç - –£—Å–ª—É–≥–∏.–±–≥</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #chat-box {
      border: 1px solid #ccc;
      padding: 10px;
      height: 300px;
      overflow-y: auto;
      background: #f4f4f4;
    }
    .chat-message {
      background: #fff;
      padding: 8px;
      margin-bottom: 10px;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .chat-timestamp {
      font-size: 0.75em;
      color: #666;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="index.html">–ù–∞—á–∞–ª–æ</a></li>
        <li><a href="create-ad.html">–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –æ–±—è–≤–∞</a></li>
        <li><a href="offers.html">–û–±—è–≤–∏</a></li>
        <li><a href="chat.html">–ß–∞—Ç</a></li>
        <li><a href="login.html">–í—Ö–æ–¥</a></li>
      </ul>
    </nav>
  </header>

  <main>
 <section>
      <h2>üó®Ô∏è –ß–∞—Ç –ü–æ–¥–¥—Ä—ä–∂–∫–∞ ‚Äì –£—Å–ª—É–≥–∞ –ë–ì</h2>
      <p>–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –≤ –Ω–∞—à–∞—Ç–∞ —á–∞—Ç –ø–æ–¥–¥—Ä—ä–∂–∫–∞!<br>
      –ê–∫–æ –∏–º–∞—Ç–µ –≤—ä–ø—Ä–æ—Å–∏, –Ω—É–∂–¥–∞ –æ—Ç —Å—ä–¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ –∂–µ–ª–∞–µ—Ç–µ –ø–æ–≤–µ—á–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–Ω–æ—Å–Ω–æ –Ω–∞—à–∏—Ç–µ —É—Å–ª—É–≥–∏ ‚Äì —Ç—É–∫ –µ –º—è—Å—Ç–æ—Ç–æ, –∫—ä–¥–µ—Ç–æ –º–æ–∂–µ—Ç–µ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ—Ç–µ –¥–∏—Ä–µ–∫—Ç–Ω–æ —Å –Ω–∞—Å.</p>
      <p>üí¨ <strong>–ö–∞–∫ –º–æ–∂–µ–º –¥–∞ –≤–∏ –ø–æ–º–æ–≥–Ω–µ–º?</strong></p>
      <ul>
        <li>–ò–º–∞—Ç–µ –≤—ä–ø—Ä–æ—Å –æ—Ç–Ω–æ—Å–Ω–æ –ø—É–±–ª–∏–∫—É–≤–∞–Ω–µ –∏–ª–∏ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞ —É—Å–ª—É–≥–∞</li>
        <li>–ù—É–∂–¥–∞–µ—Ç–µ —Å–µ –æ—Ç –ø–æ–º–æ—â –ø—Ä–∏ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª –∏–ª–∏ –≤—Ö–æ–¥</li>
        <li>–°—Ä–µ—â–∞—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∏—è —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ç–∞</li>
        <li>–ò—Å–∫–∞—Ç–µ –¥–∞ –ø–æ–¥–∞–¥–µ—Ç–µ —Å–∏–≥–Ω–∞–ª –∏–ª–∏ –¥–∞ —Å–ø–æ–¥–µ–ª–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–∞ –≤—Ä—ä–∑–∫–∞</li>
      </ul>
      <p>–ù–∞—à–∏—è—Ç –µ–∫–∏–ø –µ –Ω–∞ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–∞ –≤–∏ —Å—ä–¥–µ–π—Å—Ç–≤–∞ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ —á—Ä–µ–∑ —á–∞—Ç–∞.<br>
      –ü—Ä–æ—Å—Ç–æ –Ω–∞—Ç–∏—Å–Ω–µ—Ç–µ –∏–∫–æ–Ω–∞—Ç–∞ –∏ –∑–∞–ø–æ—á–Ω–µ—Ç–µ —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –Ω–∞—à –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª.</p>
      <p>‚è∞ <strong>–†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ –Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞—Ç–∞:</strong><br>
      –ü–æ–Ω–µ–¥–µ–ª–Ω–∏–∫ ‚Äì –ü–µ—Ç—ä–∫: 09:00 ‚Äì 18:00<br>
      –°—ä–±–æ—Ç–∞ ‚Äì –ù–µ–¥–µ–ª—è: –ü–æ–¥–¥—Ä—ä–∂–∫–∞ —á—Ä–µ–∑ –∏–º–µ–π–ª</p>
      <p>üìß –ò–∑–≤—ä–Ω —Ä–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ –º–æ–∂–µ—Ç–µ –¥–∞ –Ω–∏ –ø–∏—à–µ—Ç–µ –Ω–∞: <em>(–ø—Ä–∏–º–µ—Ä–µ–Ω email)</em></p>
      <p><strong>–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º, —á–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –£—Å–ª—É–≥–∞ –ë–ì ‚Äì –º—è—Å—Ç–æ—Ç–æ, –∫—ä–¥–µ—Ç–æ —Ç—ä—Ä—Å–µ–Ω–µ—Ç–æ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–Ω–µ—Ç–æ –Ω–∞ —É—Å–ª—É–≥–∏ —Å–µ —Å—Ä–µ—â–∞—Ç!</strong></p>
    </section>

     <section id="chat-section">
      <div id="chat-box"></div>
      <form id="chat-form">
        <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—à–µ—Ç–µ —Å—ä–æ–±—â–µ–Ω–∏–µ..." required autocomplete="off" />
        <button type="submit">–ò–∑–ø—Ä–∞—Ç–∏</button>
      </form>
    </section>
  </main>


  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc,
      serverTimestamp,
      onSnapshot,
      query,
      orderBy,
    } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";


    const firebaseConfig = {
      apiKey: "AIzaSyAWE_CHoUyxLj1izLRc7ZGlqjvJjAt6W1k",
      authDomain: "uslugibg-9435f.firebaseapp.com",
      projectId: "uslugibg-9435f",
      storageBucket: "uslugibg-9435f.firebasestorage.app",
      messagingSenderId: "741699920709",
      appId: "1:741699920709:web:d65da9d23e7bb395f8942c",
      measurementId: "G-EENFHCR14D"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const chatForm = document.getElementById("chat-form");
    const chatInput = document.getElementById("chat-input");
    const chatBox = document.getElementById("chat-box");


    chatForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const messageText = chatInput.value.trim();
      if (!messageText) return;

      try {
        await addDoc(collection(db, "chat"), {
          message: messageText,
          timestamp: serverTimestamp(),
        });
        chatInput.value = "";
      } catch (error) {
        console.error("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ:", error);
        alert("–í—ä–∑–Ω–∏–∫–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ. –û–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ.");
      }
    });

 
    const chatQuery = query(collection(db, "chat"), orderBy("timestamp", "asc"));

    onSnapshot(chatQuery, (snapshot) => {
      chatBox.innerHTML = ""; 

      snapshot.forEach((doc) => {
        const data = doc.data();
        const messageElem = document.createElement("div");
        messageElem.textContent = data.message || "–ë–µ–∑ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ";
        chatBox.appendChild(messageElem);
      });
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  </script>
</body>
</html>